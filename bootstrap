#! /bin/bash
# The line above tells this script to be interpreted as a bash script when run from the command line.

# Make sure, we can add extra repositories
sudo apt-get --yes --force-yes install 

# Add Brightbox ruby repository
sudo apt-add-repository ppa:brightbox/ruby-ng

# Add repository for Zeal documentation browser
sudo add-apt-repository ppa:zeal-developers/ppa

# Add repository for Atom editor
sudo add-apt-repository ppa:webupd8team/atom

# Update of package information
sudo apt-get update

# Update all installed packages to ensure all security updates are obtained
sudo apt-get --yes --force-yes dist-upgrade

# Installation of Google Chromium as second browser
sudo apt-get --yes --force-yes install chromium-browser

# Ruby prerequesites and tools: Bash, Curl, Git, C Compiler, OpenSSL, MySQL, Terminator, PostgresQL and several more
sudo apt-get --yes --force-yes install bash curl git-core build-essential bison openssl libreadline6 libreadline6-dev zlib1g 
sudo apt-get --yes --force-yes install zlib1g-dev libssl-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev curl git-core
sudo apt-get --yes --force-yes install libyaml-dev libxslt-dev autoconf libmysqlclient-dev libreadline5 libltdl-dev
sudo apt-get --yes --force-yes install libncurses5-dev libserf1-dbg libsvn1 libtool subversion libgdbm-dev pkg-config 
sudo apt-get --yes --force-yes install libffi-dev libgmp3-dev terminator libpq-dev postgresql-client postgresql
sudo apt-get --yes --force-yes install postgresql-contrib pgadmin3

# We install Ruby 2.1, 2.2 and 2.3 (to make sure older tutorials can be used as well)
sudo apt-get --yes --force-yes install ruby2.1 ruby2.2 ruby2.3

# We want to be able to build gems using native extensions
sudo apt-get --yes --force-yes install ruby2.1-dev ruby2.2-dev ruby2.3-dev

# We want te be able to easily switch between Ruby versions
sudo apt-get --yes --force-yes install ruby-switch

# We set latest stable Ruby, i.e. 2.3 as default
sudo ruby-switch --set ruby2.3

# Let's install bundler in all three ruby versions
sudo gem2.1 install bundler
sudo gem2.2 install bundler
sudo gem2.3 install bundler

# Let's install Rails 3,4,5 in Ruby 2.1, 2.2, 2.3 respectively
sudo gem2.1 install rails:'<4'
sudo gem2.2 install rails:'<5'
sudo gem2.3 install rails:'>5.0.0'

# Let's install database support for SQLite, PostgresQL and MySQL
sudo gem2.1 install sqlite3 pg mysql2
sudo gem2.2 install sqlite3 pg mysql2
sudo gem2.3 install sqlite3 pg mysql2

# Let's install devise (authorization gem) and paperclip (attachment upload gem)
sudo gem2.1 install devise paperclip
sudo gem2.2 install devise paperclip
sudo gem2.3 install devise paperclip

# We enable the firewall, because we will install server applications afterwards
sudo ufw enable

# Let's install Apache, MySQL and OpenSSH-Server, if we want to share data
sudo apt-get --yes --force-yes install apache2 mysql-server phpmyadmin openssh-server mysql-client

# Let's install Zeal and a sane amount of documentation
sudo apt-get --yes --force-yes install zeal

# Let's install Atom editor
sudo apt-get --yes --force-yes install atom
